<!DOCTYPE html>
    <html>
        <head>

            <link rel="icon" href="worm.png" sizes="16x16" type="image/png">
            <link rel="stylesheet" type="text/css" href="matotyyli.css">

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
            <script src="js/md5.min.js"></script>
            <script src="js/app.js"></script>
			<script src="js/worm2.js"></script>
            <script src="js/socket.io.js"></script>

            <script>
                var socket = io();

                socket.on('getPlayers', function(data){
                    document.getElementById('players').innerHTML = data;
                });

                socket.on('getRanking', function(data){
                    document.getElementById('ranking').innerHTML = data;
                });

                socket.on('chat', function(data){
                    document.getElementById('chat_test').innerHTML = data;
                });

                // This function fetches player names
                function loadPlayers(){
                    socket.emit('getPlayers');
                }

                // This function fetches the rankings
                function loadRanking(){
                    socket.emit('getRanking');
                }
                // Used for chat functionality
                function Chat(){
                    data = CheckSession();
                    data = data + ": "+document.getElementById('chat_message').value;
                    socket.emit('chat', data);
                    document.getElementById('chat_message').value = "";
                }
            </script>

            <meta charset="utf-8"/>
            <title>Game of Worms</title>
        </head>
		
        <body onload="initGame(),loadPlayers(),loadRanking(),init()">

            <div id="global">             
                <div id="header">
                     <fieldset><legend><strong>Login</strong></legend>
                        <p id="loginInfo" class="logout"></p>
                        <input type="submit" class="logout" onclick="Logout()" value="Logout">
                        <span class="login">Username:</span> <input id="username_text" class="login" type="text">
                        <span class="login">Password:</span> <input id="password_text" class="login" type="password">
                        <input type="submit" class="login" onclick="Login()" value="Login">
                        <input type="submit" class="login" onclick="Register()" value="Register">
                     </fieldset>
                </div>

                <div id="left_menu">
                   <fieldset><legend><strong>Online Players</strong></legend>
                        <p id="players"><span>Player</span></p>
                   </fieldset>
                </div>

                <div id="middle">
                <div id="gameboardarea">
                    <p>Error loading wormgame.</p>
                </div>
                </div>

                <div id="right_menu">
                    <fieldset><legend><strong>Player Ranking</strong></legend>
                        <p id="ranking"><span>Player</span></p>
                    </fieldset>
                    
                </div>

                <div id="footer">
                    <fieldset><legend><strong>Messages</strong></legend>
                    <p id="chat_test"><span></span></p>
                    </br></br></br>
                    <input type="submit" onclick="Chat()" value="Send"><input id="chat_message" type="text">
                    </fieldset> 
                </div>
            </div>
        </body>
    </html>
